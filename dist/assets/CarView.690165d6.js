import{h as d}from"./header.util.d04a64e9.js";import{_ as l,o as _,c as u,a as s,t as a,n as p,e as n,r as f,d as m}from"./index.52027f09.js";const v={mounted(){const e=parseInt(this.$route.params.id),t=this;fetch(`https://info-3180-project-2-prod.herokuapp.com//api/cars/${e}`,{method:"GET",headers:d.authHeader()}).then(function(c){return c.json()}).then(function(c){t.car=c,t.checkFav()}).catch(function(c){console.log(c)})},data(){return{isFav:!1,car:{},carFavs:[]}},computed:{carID(){return parseInt(this.$route.params.id)},API_ENDPOINT:function(){return"https://info-3180-project-2-prod.herokuapp.com/"}},methods:{checkFav(){var c;const e=JSON.parse((c=localStorage.user)!=null?c:"{}"),t=this;fetch(`https://info-3180-project-2-prod.herokuapp.com//api/users/${e.id}/favourites`,{method:"GET",headers:d.authHeader()}).then(async i=>{const o=await i.json();t.carFavs=o.map(r=>r.id),t.carFavs.includes(t.car.id)&&(t.isFav=!0,console.log("Fav !"))})},getCar(){},makeFav(){const e=this;fetch(`https://info-3180-project-2-prod.herokuapp.com//api/cars/${this.car.id}/favourites`,{method:"POST",headers:d.authHeader()}).then(t=>{t.status===201&&(e.isFav=!e.isFav)})},isFav(){let e=this;fetch(`https://info-3180-project-2-prod.herokuapp.com//api/users/${userID()}/favourites`,{headers:authHeader()}).then(function(t){return t.json()}).then(function(t){console.log(t),e.currentCars=t.currentCars;for(car in currentCars)car.id==carID&&(count=1),count>0})},favCar(){fetch(`https://info-3180-project-2-prod.herokuapp.com//api/cars/${carID}/favourites`,methods=["POST"],{headers:authHeader()}).then(function(e){return e.json()}).then(function(e){console.log(e)})}}},g={class:"card shadow p-3 mb-5 bg-body rounded mx-auto",style:{width:"55vw"}},k=["src"],x={class:"card-body"},C={class:"card-title"},F={class:"card-title text-muted"},$={class:"card-text"},j={class:"row"},y={class:"col-md-6"},I={class:"card-text"},b=n(" Colour \xA0 \xA0 "),w={class:"col-md-6"},T={class:"card-text"},D=n(" Body Type \xA0 \xA0 "),N={class:"row mb-5"},P={class:"col-md-6"},E={class:"card-text"},O=n(" Price \xA0 \xA0 "),H={class:"col-md-6"},S={class:"card-text"},B=n(" Transmission \xA0 \xA0 "),V={class:"row"},A=s("div",{class:"col"},[s("button",{class:"btn btn-warning text-light"},"Email Owner")],-1),G={class:"col d-flex justify-content-end"},z={class:"btn-round"};function J(e,t,c,i,o,r){return _(),u("div",g,[s("img",{src:r.API_ENDPOINT+"/"+o.car.photo,alt:"car.make",class:"card-img-top"},null,8,k),s("div",x,[s("h3",C,a(o.car.make),1),s("h4",F,a(o.car.model),1),s("p",$,a(o.car.description),1),s("div",j,[s("div",y,[s("p",I,[b,s("strong",null,a(o.car.color),1)])]),s("div",w,[s("p",T,[D,s("strong",null,a(o.car.car_type),1)])])]),s("div",N,[s("div",P,[s("p",E,[O,s("strong",null,a(o.car.price),1)])]),s("div",H,[s("p",S,[B,s("strong",null,a(o.car.transmission),1)])])]),s("div",V,[A,s("div",G,[s("button",z,[s("i",{class:p([[r.isFav?"fa-solid":"fa-regular"],"fa fa-heart"]),onClick:t[0]||(t[0]=h=>r.makeFav())},null,2)])])])])])}var U=l(v,[["render",J]]);const q={data(){},components:{Car:U}},K={class:"container"};function L(e,t,c,i,o,r){const h=f("Car");return _(),u("div",K,[m(h)])}var R=l(q,[["render",L]]);export{R as default};
